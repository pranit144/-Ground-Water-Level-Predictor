<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tidal Cycles Impact Prediction</title>

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Custom Styling -->
    <style>
        body {
            background-color: #f7fafc;
            font-family: 'Roboto', sans-serif;
        }

        .skyblue-header {
            color: #007bff;
            font-weight: 700;
            text-align: center;
            margin-top: 40px;
        }

        .form-container {
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
            font-weight: 500;
        }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        .form-group label {
            font-weight: 500;
        }

        .results {
            display: none;
            margin-top: 40px;
        }

        .result-card {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }

        .result-card:hover {
            transform: translateY(-5px);
        }

        .result-card h3 {
            color: #343a40;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .up-arrow {
            color: #28a745;
            font-weight: 700;
        }

        .down-arrow {
            color: #dc3545;
            font-weight: 700;
        }

        .error-message {
            color: red;
            margin-top: 20px;
            font-size: 1.2rem;
        }

        .footer {
            margin-top: 50px;
            text-align: center;
            font-size: 0.9rem;
            color: #888;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8">
            <h1 class="skyblue-header">Tidal Cycles Impact Prediction</h1>
            <div class="form-container mt-4">
                <form id="prediction-form">
                    <div class="form-group">
                        <label for="address">Enter Coastal Area Address:</label>
                        <input type="text" class="form-control" id="address" name="address" placeholder="e.g., Mumbai, India" required>
                    </div>
                    <div class="form-group">
                        <label for="time">Enter Time (format HH:MM AM/PM):</label>
                        <input type="text" class="form-control" id="time" name="time" placeholder="e.g., 10:30 AM" required>
                    </div>
                    <div class="form-group">
                        <label for="tide_type">Select the Type of Tide:</label>
                        <select class="form-control" id="tide_type" name="tide_type">
                            <option value="High">High</option>
                            <option value="Low">Low</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block mt-3">Predict</button>
                </form>

                <div id="error-message" class="error-message"></div>

                <div class="results mt-5">
                    <h2 class="skyblue-header">Prediction Results</h2>
                    <div id="groundwater-result" class="result-card mt-3"></div>
                    <div id="seawater-result" class="result-card mt-3"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- jQuery and Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

<!-- Prediction logic -->
<script>
$(document).ready(function(){
    $('#prediction-form').on('submit', function(e){
        e.preventDefault();

        // Hide previous results
        $('.results').hide();
        $('#error-message').text('');

        $.ajax({
            url: '/api/tidal_cycle/predict',
            type: 'POST',
            data: $(this).serialize(),
            success: function(response) {
                if (response.error) {
                    $('#error-message').text(response.error);
                } else {
                    // Groundwater deviation
                    let groundwaterDeviation = response.groundwater_deviation;
                    let groundwaterArrow = groundwaterDeviation < 0
                        ? '<span class="down-arrow">&#9660; Decreased by ' + Math.abs(groundwaterDeviation).toFixed(2) + ' mbgl</span>'
                        : '<span class="up-arrow">&#9650; Increased by ' + Math.abs(groundwaterDeviation).toFixed(2) + ' mbgl</span>';

                    // Sea water level deviation
                    let seawaterDeviation = response.seawater_deviation.toFixed(2);

                    // Show results
                    $('#groundwater-result').html('<h3>Groundwater Levels Impact: ' + groundwaterArrow + '</h3>');
                    $('#seawater-result').html('<h3>Sea Water Level Rise: <strong>' + seawaterDeviation + ' meters</strong></h3>');
                    $('.results').show();
                }
            },
            error: function() {
                $('#error-message').text('An error occurred. Please try again.');
            }
        });
    });
});
</script>

<div class="footer">
    &copy; 2024 Tidal Cycles Prediction. All rights reserved.
</div>

</body>
</html>
